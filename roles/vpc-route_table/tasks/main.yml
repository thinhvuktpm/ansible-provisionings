- name: Create VPC Public Subnet Route Table {{ project_evironment }}
  ec2_vpc_route_table:
    aws_access_key: "{{ aws_access_key }}"
    aws_secret_key: "{{ aws_secret_key }}"
    vpc_id: "{{ vpc_id }}"
    region: "{{ region }}"
    state: present
    tags:
      Name: "{{ route_table_name }}"
    subnets: [ "{{ subnet_id }}" ]
    # create routes
    routes:
      - dest: "{{ destination_cidr_block }}"
        gateway_id: "{{ gateway_id }}"
  register: route_table

- name: Save avarible route_table_id
  set_fact:
    route_table_id: "{{ route_table.route_table.id }}"

- name: Save avarible route_table_id
  shell: echo "route_table_id:" {{ route_table_id }} >> vars/var.yml
